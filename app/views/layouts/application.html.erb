<!DOCTYPE html>
<html>
  <head>
    <title>Boutique Chatons</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Ton CSS perso -->
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  </head>

  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
      <div class="container">
        <%= link_to "🐱 FotoChatons ", root_path, class: "navbar-brand fw-bold text-mauve" %>
        
        <div class="d-flex gap-2">
          <% if user_signed_in? %>
            <%# Lien Admin visible uniquement pour les admins %>
            <% if current_user.admin? %>
              <%= link_to "Admin", admin_dashboard_path, class: "btn btn-warning" %>
            <% end %>

            <%= link_to "Panier", cart_path, class: "btn btn-mauve" %>

            <%= button_to "Déconnexion",
                  destroy_user_session_path,
                  method: :delete,
                  class: "btn btn-rose",
                  form: { class: "d-inline" } %>
          <% else %>
            <%= link_to "Connexion", new_user_session_path, class: "btn btn-rose" %>
          <% end %>
        </div>
      </div>
    </nav>

    <main class="flex-grow-1">
      <%= yield %>
    </main>

    <footer class="text-center py-4 bg-secondary mt-auto">
      <p class="mb-0">© 2025 Boutique Chatons - Tous droits réservés.</p>
    </footer>

    <!-- JavaScript Rails et Bootstrap -->
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
